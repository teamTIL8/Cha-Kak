<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<title>차칵</title>
	<style>
		* {margin:0px; padding:0px;}
		h5 {margin:2px;}
		.wrapper{width:1280px;height:800px;}
		.sidebar{width:200px;height:800px;border-right:1px solid black;float:left;padding:10px;}
		.content{width:auto;height:800px;float:left;padding:10px;}
		.clear{clear:both;}
		.menu{margin:8px;}
		.menu li{list-style-type: none; cursor: pointer;}
		
		table {
	        width: 100%;
	        border-collapse: collapse;
	        margin-top: 20px;
	        font-family: sans-serif;
	        font-size: 14px;
	    }

	    thead {
	        background-color: #f2f2f2;
	    }

	    th, td {
	        padding: 12px 16px;
	        text-align: left;
	        border-bottom: 1px solid #ddd;
	    }

	    tr:hover {
	        background-color: #f9f9f9;
	    }
		
		.table-header {
	        display: flex;
	        justify-content: space-between;
	        align-items: center;
	        margin-top: 20px;
	    }

	    .report-button {
	        padding: 8px 16px;
	        background-color: #4CAF50;
	        color: white;
	        text-decoration: none;
	        border-radius: 4px;
	        font-size: 14px;
	    }

	    .report-button:hover {
	        background-color: #45a049;
	    }

	    /* ✅ 네 코드 스타일 (추가된 부분) */
	    .search-form {
	        margin-top: 10px;
	        margin-bottom: 20px;
	        padding: 15px;
	        background-color: #f3f3f3;
	        border: 1px solid #ccc;
	        border-radius: 6px;
	    }
	    .search-form input {
	        margin-right: 10px;
	        padding: 8px;
	        border: 1px solid #ccc;
	        border-radius: 4px;
	    }
	    .search-form button {
	        padding: 8px 16px;
	        background-color: #007bff;
	        color: white;
	        border: none;
	        border-radius: 4px;
	        cursor: pointer;
	    }
	    .search-form button:hover {
	        background-color: #0056b3;
	    }

	    .pagination {
	        margin-top: 20px;
	        text-align: center;
	    }
	    .pagination a {
	        display: inline-block;
	        padding: 8px 12px;
	        margin: 0 5px;
	        border: 1px solid #ddd;
	        text-decoration: none;
	        color: #333;
	        border-radius: 4px;
	    }
	    .pagination a.active {
	        background-color: #007bff;
	        color: white;
	        border-color: #007bff;
	    }
	    .pagination a:hover:not(.active) {
	        background-color: #e9e9e9;
	    }
	</style>
</head>
<body>
	<div class="wrapper">
		<div class="sidebar">
			<div class="menu">
				<h3>제보</h3>
				<ul>
					<li onclick="location.href='/report/new'">제보 신청</li>
					<li onclick="location.href='/report/list'">제보 조회</li>
					<li>제보 내역</li>
				</ul>
			</div>
			<div class="menu">
				<h3>마이페이지</h3>
				<ul>
					<li>나의 정보</li>
					<li>신고 평가</li>
				</ul>
			</div>
		</div>

		<div class="content">
			<h1><b>신고조회</b></h1>
			<h5>불법 주정차 차량의 목록 조회</h5>
			<hr>

			<!-- ✅ 검색 필터 폼 추가 -->
			<div class="search-form">
			    <form th:action="@{/report/list}" method="get">
			        <input type="text" name="carNumber" placeholder="차량 번호" th:value="${carNumber}">
			        <input type="text" name="location" placeholder="위치" th:value="${location}">
			        <input type="date" name="reportDate" placeholder="신고 날짜" th:value="${reportDate}">
			        <input type="text" name="violationType" placeholder="위반 유형" th:value="${violationType}">
			        <input type="date" name="startDate" placeholder="시작 날짜" th:value="${startDate}">
			        <input type="date" name="endDate" placeholder="종료 날짜" th:value="${endDate}">
			        <input type="text" name="keyword" placeholder="키워드" th:value="${keyword}">
			        <button type="submit">검색</button>
			    </form>
			</div>

			<div class="table-header">
			    <h2>불법 주정차 제보 목록</h2>
			    <a href="/report/new" class="report-button">제보 신청</a>
			</div>
			
			<table>
				<thead>
					<tr>
						<th>순번</th>
						<th>제목</th>
						<th>위반 유형</th>
						<th>위반 지역</th>
						<th>위반 일자</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="report, stat : ${reportPage.content}"
					    th:onclick="|location.href='/report/${report.reportId}'|"
					    style="cursor:pointer;">
					    <td th:text="${stat.count}">1</td>
					    <td th:text="${report.title}">제목</td>
					    <td th:text="${report.violationType}">위반유형</td>
					    <td th:text="${report.address}">지역</td>
					    <td th:text="${#temporals.format(report.reportTime, 'yyyy-MM-dd HH:mm')}">날짜</td>
					</tr>
				</tbody>
			</table>

			<!-- ✅ 페이지네이션 -->
			<div class="pagination">
			    <a th:if="${reportPage.hasPrevious()}"
			       th:href="@{/report/list(page=${reportPage.number - 1},
			       		carNumber=${carNumber}, location=${location}, reportDate=${reportDate},
			       		violationType=${violationType}, startDate=${startDate}, endDate=${endDate}, keyword=${keyword})}">이전</a>

			    <span th:each="i : ${#numbers.sequence(0, reportPage.totalPages - 1)}">
			        <a th:classappend="${i == currentPage ? 'active' : ''}"
			           th:href="@{/report/list(page=${i},
			           carNumber=${carNumber}, location=${location}, reportDate=${reportDate},
			           violationType=${violationType}, startDate=${startDate}, endDate=${endDate}, keyword=${keyword})}"
			           th:text="${i + 1}">1</a>
			    </span>

			    <a th:if="${reportPage.hasNext()}"
			       th:href="@{/report/list(page=${reportPage.number + 1},
			       		carNumber=${carNumber}, location=${location}, reportDate=${reportDate},
			       		violationType=${violationType}, startDate=${startDate}, endDate=${endDate}, keyword=${keyword})}">다음</a>
			</div>
		</div>

		<div class="clear"></div>
	</div>
</body>	
</html>
